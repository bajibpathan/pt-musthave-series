Distributed load testing
=================================

It refers to the process of distributing the load generated by performance tests across multiple machines or servers. 

Components Involved
-------------------
Control Node:
This is the system running JMeter GUI / Non-GUI, which controls and coordinates the overall testing process.

Worker Node:
It receives instructions from Control Node or Master System and simulate load on the target system. 

Target system
This is where the actual application will be running.

Prerequisities:
---------------
We need to ensure that both Contorl Node & Worker Node(s) have the same Jmeter & Java version.
We need to ensure that there is a connectivity between Contorl Node & Worker Node(s)
All the systems used in the testing are on the same subnet.

Configuration
-------------
1. SSL Setup:
  Since JMeter 4.0, RMI will use SSL and SSL needs keys and certificates to work. So, we need to create those keys & certificate.

  -> Go to Jmeter/bin directory and execute "create-rmi-keystore" script. It will generate rmi_keystore.jks file.
  -> Copy the rmi_keystore.jks file to all the worker nodes.

Copy command:
  scp <file name> <username>@<servername/ip>:<filepath>

  By default, the validity will be 7 days and we can extend that duration by updating it create-rmi-keystore script. 

  If we want to skip the SSL setup, then we need to update the below property to true in "jmeter.properties"
    server.rmi.ssl.disable=true

2. Worker Node Setup:
  Before actually starting the load test, we need to start the jmeter-server script which exists in jmeter/bin directory.
  By default, Jmeter-server will use random port for communication. 
  If we want a specific port for the Jmeter then we need to specify "server.rmi.localport" property.
  
  
3. Control Node Setup:
  We need to look for "remote_hosts" property in jmeter.properties file and update all the worker nodes ip information.
  By default, Master node will use random port for communication. If we want a specific port for the control noe then we need to specify client.rmi.localport property.

To start the distributed load test using GUI Mode, we need to go to Run menu and click Remote Start or Remote Start All
To stop the jmeter-server script in all the worker node from GUI mode, go to RUN menu and click Remote Exit or Remote Exit All

Non-GUI mode options for distributed load testing:
-r                          : Distributed mode (used for remote/distributed testing)
-R <list of  remote servers>: Specifies remote servers for distributed testing.
-X                          : To stop the jmeter-server script on all the worker nodes

Non-GUI /CLI command:
jmeter -n -t [jmx file info] -l [log file info] -R [Worker Node IP adddress] -X
jmeter -n -t [jmx file info] -l [log file info] -r -X

